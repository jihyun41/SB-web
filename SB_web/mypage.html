<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SB Golf Club_mypage</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="CSS/style.css">

    <style>
        .imageBox {
            width: 200px;
            height: 200px;
            background-color: #eee;
            border: 1px solid #ccc;
            background-size: cover;
            background-position: center;
        }

        .change-image {
            background-color: white;
            color: black;
            border: 1px solid #ccc;
            cursor: pointer;
        }

        .preview-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .preview-image:hover {
            border-color: rgb(59, 102, 67);
        }

        .profile-row-wrapper {
            position: relative;
        }

        .status-box {
            position: absolute;
            right: 0;
            top: 0;
            text-align: right;
        }

        .change-profile {
            background-color: white;
            color: black;
            border: 1px solid #ccc;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div id="include-header"></div>
    <div class="container mt-5">
        <div class="row align-items-start">

            <div class="col-md-3 text-center">
                <div class="imageBox mb-2" id="imageBox"></div>
                <button type="button" class="btn btn-outline-secondary change-image mt-2" id="change-image"
                    data-bs-toggle="modal" data-bs-target="#imageModal">
                    이미지 편집
                </button>
            </div>

            <div class="col-md-6">
                <div id="profileView">
                    <div class="profile-row-wrapper mb-2">
                        <p class="mb-2"><strong>이름</strong> <span id="viewName"></span></p>

                        <div class="status-box">
                            <p class="mb-1"><strong>상태</strong> <span id="viewRole"></span></p>
                            <button class="btn btn-outline-primary change-profile btn-sm" id="change-profile"
                                onclick="switchToEdit()">정보 편집</button>
                        </div>
                    </div>

                    <p class="mb-2"><strong>성별</strong> <span id="viewGender"></span></p>
                    <p class="mb-2"><strong>생년월일</strong> <span id="viewBirthday"></span></p>
                    <p class="mb-2"><strong>이메일</strong> <span id="viewEmail"></span></p>
                    <p class="mb-2"><strong>비밀번호</strong> <span id="viewPassword"></span></p>
                </div>
            </div>

            <form id="profileEdit" class="d-none">
                <div class="mb-2">
                    <label for="editName"><strong>이름</strong></label>
                    <input type="text" id="editName" class="form-control" placeholder="눈송이" required>
                </div>
                <div class="mb-2">
                    <label for="editGender"><strong>성별</strong></label>
                    <select id="editGender" class="form-select">
                        <option>여성</option>
                        <option>남성</option>
                    </select>
                </div>
                <div class="mb-2">
                    <label for="editbirthday"><strong>생년월일</strong></label>
                    <input type="date" id="editbirthday" class="form-control" placeholder="2025.05.27" required>
                </div>
                <div class="mb-2">
                    <label for="editEmail"><strong>이메일</strong></label>
                    <input type="email" id="editEmail" class="form-control" placeholder="snow@gmail.com" required>
                </div>
                <div class="mb-2">
                    <label for="password"><strong>비밀번호</strong></label>
                    <input type="password" id="password" class="form-control" required>
                </div>
                <div class="mb-2">
                    <label for="role"><strong>상태</strong></label>
                    <select id="role" class="form-select">
                        <option>부원</option>
                        <option>회장</option>
                        <option>부회장</option>
                        <option>운영자</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">저장</button>
            </form>
        </div>

    </div>
    </div>

    <div class="modal fade" id="imageModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content p-3">
                <div class="modal-header">
                    <h5 class="modal-title">이미지 선택</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="uploadInput">내 사진 불러오기</label>
                        <input type="file" class="form-control" id="uploadInput" accept="image/*">
                    </div>
                    <hr>
                    <div class="d-flex justify-content-between">
                        <img src="IMG/tomato.png" class="preview-image" onclick="selectImage(this.src)">
                        <img src="IMG/cherry.png" class="preview-image" onclick="selectImage(this.src)">
                        <img src="IMG/grape.png" class="preview-image" onclick="selectImage(this.src)">
                        <img src="IMG/watermelon.png" class="preview-image" onclick="selectImage(this.src)">
                        <img src="IMG/cabbage.png" class="preview-image" onclick="selectImage(this.src)">
                        <img src="IMG/carrot.png" class="preview-image" onclick="selectImage(this.src)">
                        <img src="IMG/mushroom.png" class="preview-image" onclick="selectImage(this.src)">
                        <img src="IMG/blueberry.png" class="preview-image" onclick="selectImage(this.src)">

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="include-footer"></div>

    <script>
        const imageBox = document.getElementById('imageBox');
        const uploadInput = document.getElementById('uploadInput');

        uploadInput.addEventListener('change', function () {
            const file = uploadInput.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function (e) {
                imageBox.style.backgroundImage = `url('${e.target.result}')`;
                localStorage.setItem('userImage', e.target.result);
            };
            reader.readAsDataURL(file);
        });

        function selectImage(src) {
            imageBox.style.backgroundImage = `url('${src}')`;
            localStorage.setItem('userImage', src);
        }

        window.addEventListener('DOMContentLoaded', () => {
            const savedImage = localStorage.getItem('userImage');
            if (savedImage) {
                imageBox.style.backgroundImage = `url('${savedImage}')`;
            }
            const saved = JSON.parse(localStorage.getItem('userProfile')) || {};

            const viewFields = [
                { id: 'viewName', value: saved.name },
                { id: 'viewGender', value: saved.gender },
                { id: 'viewBirthday', value: saved.birthday },
                { id: 'viewEmail', value: saved.email },
                { id: 'viewPassword', value: saved.password },
                { id: 'viewRole', value: saved.role }
            ];

            viewFields.forEach(field => {
                const el = document.getElementById(field.id);
                if (field.value && field.value.trim() !== '') {
                    el.textContent = field.value;
                    el.classList.remove('text-muted');
                } else {
                    el.textContent = '입력되지 않음';
                    el.classList.add('text-muted');
                }
            });
        });
    </script>

    <script src="JS/main.js"></script>

</body>

</html>